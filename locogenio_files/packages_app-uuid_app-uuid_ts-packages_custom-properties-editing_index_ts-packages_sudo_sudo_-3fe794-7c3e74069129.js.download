"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["packages_app-uuid_app-uuid_ts-packages_custom-properties-editing_index_ts-packages_sudo_sudo_-3fe794"],{52475:(e,t,r)=>{r.d(t,{_S:()=>o,cB:()=>l,cW:()=>s});var a=r(53627),n=r(71315);let o=()=>{let e=(0,a.JV)().appId;return e&&"rails"!==e?e:crypto.randomUUID()},s=e=>{(0,a.C3)({appId:e})},l=()=>{let e=document.querySelector("react-app")||document.querySelector("projects-v2");return e?.uuid||"rails"};n.cg?.addEventListener("hashchange",()=>{(0,a.C3)({appId:l()})},!0)},87976:(e,t,r)=>{r.d(t,{AA:()=>p,_0:()=>y,ov:()=>m,Jj:()=>d,sq:()=>c,q0:()=>g});let a=["true","false"];var n=r(99385),o=r(25407),s=r(65232),l=r(96379);let i=/[^a-zA-Z0-9_#$-]/gu,u=/[^ -!#-~]/gu;function c(e,t){if(e.length>75)return"Name cannot be longer than 75 characters";if(0===e.length)return"Name is required";for(let r of t)if(r.toLowerCase()===e.toLowerCase())return"Name already exists";let r=x(e,i);if(r)return`Name contains invalid characters: ${r}`}async function d(e,t){let r="Could not check property name";try{let a=await (0,l.lS)((0,o.wYU)({sourceName:e,propertyName:t}));if(a.ok){let{status:e,orgConflicts:r}=await a.json();switch(e){case"valid":return;case"already_exists":return{message:"Name already exists"};case"exists_in_business_orgs":return{message:`The property ${t} already exists in this enterprise`,orgConflicts:r}}}return{message:r}}catch{return{message:r}}}function p(e,t){let r=e.trim().toLowerCase();if(r.length>75)return"Option cannot be longer than 75 characters";if(0===r.length)return"Option cannot be empty";if(t.has(e))return"Option already exists";if(function(e,t){for(let r of t)if(r.toLowerCase()===e)return!0;return!1}(r,t))return"Option already exists";let a=x(e,u);if(a)return`Option contains invalid characters: ${a}`}function m(e){if(e.length>255)return"Description cannot be longer than 255 characters"}let h="Invalid value type",f="Default value should be a valid option";async function y(e,t,r,o=[],s){if(r){if(!e.length)return"Cannot be empty for a required property";switch(t){case"single_select":if((0,n.OD)(e))return h;if(!o.includes(e))return f;break;case"true_false":if((0,n.OD)(e))return h;if(!a.includes(e))return f;break;case"multi_select":if(!(0,n.OD)(e))return h;if(!e.every(e=>o.includes(e)))return f;break;case"string":if((0,n.OD)(e))return h;return await g(e,s)}}}async function g(e,t){if(!e)return;if(e.length>75)return"Cannot be longer than 75 characters";let r=x(e,u);return r?`Contains invalid characters: ${r}`:t&&!await (0,s.N)(t,e)?"Value does not match pattern":void 0}function x(e,t){let r=Array.from(e.matchAll(t));return r?Array.from(new Set(r.map(e=>" "===e[0]?"whitespace":e[0]))).join(", "):""}},61121:(e,t,r)=>{r.d(t,{nb:()=>v,az:()=>_,ze:()=>j,D2:()=>ee,vu:()=>ec,hi:()=>S,C$:()=>A,qR:()=>eo});var a=r(74848),n=r(94016),o=r(99385),s=r(38621),l=r(55847),i=r(1002),u=r(96540);let c={selectPanelButton:"use-select-panel-props-module__selectPanelButton--tVT4X"},d="(Mixed)",p="default",m="options",h="empty",f={leadingVisual:s.CircleSlashIcon,text:"No matches",disabled:!0,selected:void 0,key:"no-matches",id:"no-matches",groupId:m};function y({propertyName:e,defaultValue:t,allowedValues:r,mixed:n,currentSelection:y,anchorProps:g={},singleSelectMode:x}){var w,b;let[v,_]=(0,u.useState)(!1),[j,N]=(0,u.useState)(""),V=(0,u.useMemo)(()=>(r||[]).map(e=>{var t;return t=e,{id:t,text:t,selected:y.includes(e),groupId:m}}),[r,y]),[P,A]=(0,u.useMemo)(()=>{var e,r,a;let o=function(e,t){let r=t?e.filter(e=>(e.text||"").toLowerCase().includes(t)):e;return 0===r.length?[f]:r}(V,j.toLowerCase()),s=[{groupId:m,key:m}],l=[];return t?(l.unshift((e=t,r=!y.length&&!n,{id:"default",text:`Default (${C(e,"options")})`,selected:r,groupId:p,description:void 0,descriptionVariant:"block"})),s.unshift({groupId:p,key:p})):x&&(l.unshift({text:"(Empty)",key:"(empty)",id:"(empty)",selected:!y.length&&!n,groupId:h,description:"Unset value",descriptionVariant:"block"}),s.unshift({groupId:h,key:h})),[l.concat(o),s]},[x,V,y.length,t,j,n]),S=P.length>7?"medium":"auto",T=(w=y,b=t,n?d:(0,o.sX)(w)?(0,o.sX)(b)?"Choose an option":`Default (${C(b||"")})`:C(w));return{items:P,renderAnchor:t=>(0,a.jsx)(l.Q,{block:!0,alignContent:"start","aria-label":n?d:`Select ${e}`,trailingAction:s.TriangleDownIcon,className:c.selectPanelButton,...t,...g,children:(0,a.jsx)(i.A,{maxWidth:"100%",title:T,children:T})}),placeholderText:"Search for values",filterValue:j,open:v,onFilterChange:N,onOpenChange:e=>{_(e),N("")},overlayProps:{height:S,width:"medium"},groupMetadata:A}}function g(e){return e.groupId===p}function x(e){return e.groupId===m}function w(e){return e.groupId===h}function C(e,t="selected"){return(0,o.OD)(e)?e.length<=1?e[0]||"":`${e.length} ${t}`:e}let b=["true","false"];function v({anchorRef:e,propertyName:t,defaultValue:r,propertyValue:o,mixed:s,onChange:l,anchorProps:i}){let u=y({propertyName:t,defaultValue:r,allowedValues:b,mixed:s,currentSelection:o?[o]:[],anchorProps:i,singleSelectMode:!0}),c=u.items.find(e=>e.selected);return(0,a.jsx)(n.X,{...u,anchorRef:e,onSelectedChange:e=>{e&&(g(e)||w(e)?l(""):l(e.text||""))},selected:c})}try{v.displayName||(v.displayName="CustomPropertyBooleanSelectPanel")}catch{}function _({anchorRef:e,propertyName:t,defaultValue:r,allowedValues:s,propertyValue:l,mixed:i,onChange:c,anchorProps:d}){let p=y({propertyName:t,defaultValue:r,allowedValues:s,mixed:i,currentSelection:l,anchorProps:d,singleSelectMode:!1}),[m,h]=(0,u.useState)(()=>r&&(0,o.sX)(l)&&!i),f=p.items.filter(e=>m?g(e)||r?.includes(e.text||""):x(e)&&e.selected);return(0,a.jsx)(n.X,{...p,anchorRef:e,onSelectedChange:e=>{let{filterValue:t=""}=p,a=e=>!e.toLowerCase().includes(t.toLowerCase()),n=!m&&e.some(g);if(h(n),n)return c([]);let s=[];t&&(s=m&&!n&&(0,o.OD)(r)?r.filter(a):l.filter(a));let i=e.filter(x).map(e=>e.text||"");c(s.concat(i))},onOpenChange:(e,t)=>{p.onOpenChange(e),e||h(r&&(0,o.sX)(l)&&!i)},selected:f})}try{_.displayName||(_.displayName="CustomPropertyMultiSelectPanel")}catch{}function j({anchorRef:e,propertyName:t,defaultValue:r,allowedValues:o,propertyValue:s,mixed:l,onChange:i,anchorProps:u}){let c=y({propertyName:t,defaultValue:r,allowedValues:o,mixed:l,currentSelection:s?[s]:[],anchorProps:u,singleSelectMode:!0}),d=c.items.find(e=>e.selected);return(0,a.jsx)(n.X,{...c,anchorRef:e,onSelectedChange:e=>{e&&(g(e)||w(e)?i(""):i(e.text||""))},selected:d})}try{j.displayName||(j.displayName="CustomPropertySingleSelectPanel")}catch{}let N={CustomPropertySelectPanelButton:"CustomPropertySelectPanel-module__CustomPropertySelectPanelButton--Sdiii"},V="(Mixed)",P={title:"No property values were found",body:"Try searching for a different value for results.",variant:"empty"};function A({anchorRef:e,propertyName:t,defaultValue:r,allowedValues:o,propertyValue:s,mixed:l,onChange:i,anchorProps:u}){let c=T(t,r,o,l,s?[s]:[],u),d=c.items.find(e=>e.text&&s===e.text);return(0,a.jsx)(n.X,{...c,anchorRef:e,onSelectedChange:e=>i(e?.text||""),selected:d,message:0===c.items.length?P:void 0})}function S({anchorRef:e,propertyName:t,defaultValue:r,allowedValues:o,propertyValue:s,mixed:l,onChange:i,anchorProps:u}){let c=T(t,r,o,l,s,u),d=c.items.filter(e=>e.selected);return(0,a.jsx)(n.X,{...c,anchorRef:e,onSelectedChange:e=>{let{filterValue:t}=c,r=e.map(e=>e.text||"");t?i([...s.filter(e=>!e.toLowerCase().includes(t.toLowerCase())),...r]):i(r)},selected:d,message:0===c.items.length?P:void 0})}function T(e,t,r,n,c,d={}){var p,m;let[h,f]=(0,u.useState)(!1),[y,g]=(0,u.useState)(""),x=function(e,t){let r=t?e.filter(e=>(e.text||"").toLowerCase().includes(t)):e;return 0===r.length?[]:r}((0,u.useMemo)(()=>(r||[]).map(e=>{var t;return t=e,{id:t,text:t,selected:c.includes(e)}}),[r,c]),y.toLowerCase()),w=x.length>7?"medium":"auto",C=(p=c,m=t,n?V:(0,o.sX)(p)?(0,o.sX)(m)?"Choose an option":`Default (${R(m||"")})`:R(p));return{items:x,renderAnchor:t=>(0,a.jsx)(l.Q,{block:!0,alignContent:"start","aria-label":n?V:`Select ${e}`,trailingAction:s.TriangleDownIcon,className:N.CustomPropertySelectPanelButton,...t,...d,children:(0,a.jsx)(i.A,{maxWidth:"100%",title:C,children:C})}),placeholderText:"Search for values",filterValue:y,open:h,onFilterChange:g,onOpenChange:e=>{f(e),g("")},overlayProps:{height:w,width:"medium"}}}function R(e){return(0,o.OD)(e)?e.length<=1?e[0]||"":`${e.length} selected`:e}try{A.displayName||(A.displayName="CustomPropertySingleSelectPanel")}catch{}try{S.displayName||(S.displayName="CustomPropertyMultiSelectPanel")}catch{}var I=r(25407),L=r(91747),k=r(81246),$=r(65029),D=r(90928),M=r(5945),E=r(87330),F=r(52446),U=r(24815),O=r(46747),B=r(9745),W=r(87826),q=r(34164),H=r(87976);let X={overlayHeaderTitle:"CustomPropertyStringEditor-module__overlayHeaderTitle--e8XcQ",anchorButton:"CustomPropertyStringEditor-module__anchorButton--RUSPn"},z={messageContainer:"WarningMessage-module__messageContainer--hkIbS"};function J({children:e}){return(0,a.jsxs)("div",{className:(0,q.$)(z.messageContainer,"d-flex gap-2 text-small color-fg-attention color-bg-attention border-top border-bottom color-border-attention"),children:[(0,a.jsx)(s.AlertIcon,{size:16}),(0,a.jsx)("div",{children:e})]})}try{J.displayName||(J.displayName="WarningMessage")}catch{}function K(e){var t,r;let{mixed:n,propertyValue:c,defaultValue:d,onChange:p}=e,[m,h]=(0,u.useState)(!1),f=(0,u.useRef)(null),y=(t=c,r=d,n?V:(0,o.sX)(t)?(0,o.sX)(r)?"Set value":`default (${r})`:t);return(0,a.jsx)(B.T,{focusTrapSettings:{initialFocusRef:f},open:m,onOpen:()=>h(!0),onClose:()=>h(!1),side:"outside-bottom",overlayProps:{role:"dialog",sx:{width:320},title:"Set a text value"},renderAnchor:e=>(0,a.jsx)(l.Q,{...e,block:!0,className:X.anchorButton,alignContent:"start",trailingAction:s.TriangleDownIcon,children:(0,a.jsx)(i.A,{maxWidth:"100%",title:y,children:y})}),children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:(0,q.$)(n?"border-bottom-0":"border-bottom","p-2 pl-3 d-flex flex-justify-between flex-items-center gap-2"),children:[(0,a.jsx)("div",{className:(0,q.$)(X.overlayHeaderTitle,"text-bold"),children:"Set a text value"}),(0,a.jsx)(E.K,{ref:f,"aria-label":"Close",variant:"invisible",icon:s.XIcon,onClick:()=>h(!1)})]}),n&&(0,a.jsx)(J,{children:"Property has mixed values"}),m&&(0,a.jsx)(Z,{...e,onCancel:()=>h(!1),onChange:e=>{p(e),h(!1)}})]})})}function Z({propertyValue:e,defaultValue:t,regexPattern:r,orgName:n,mixed:o,onCancel:i,onChange:c}){let d=(0,u.useRef)(null),p=!!t,[m,h]=(0,u.useState)(!!t&&!e&&!o),[f,y]=(0,u.useState)(()=>{var r,a;return r=e,a=t,o?"":r||a||""}),[g,x]=(0,u.useState)(),w=async e=>{var t,a,n;let o=await (t=e,a=p,n=r,!t&&a?"This property is required and can\u2019t be blank":(0,H.q0)(t,n||void 0));return x(o),o},C=(0,O.d)(w,300,{onChangeBehavior:"cancel"}),b=async e=>{h(!1),y(e),C(e)},v=async()=>{if(await w(f))return d.current?.focus();c(m?"":f)};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsxs)($.A,{children:[(0,a.jsx)($.A.Label,{visuallyHidden:!0,children:"Edit value"}),(0,a.jsx)(U.A,{block:!0,ref:d,value:f,placeholder:"Enter a value",onChange:e=>b(e.target.value),trailingAction:f?(0,a.jsx)(U.A.Action,{onClick:()=>b(""),icon:s.XCircleFillIcon,"aria-label":"Clear input"}):(0,a.jsx)(a.Fragment,{})}),g&&(0,a.jsx)($.A.Validation,{variant:"error",children:g})]}),t&&(0,a.jsxs)($.A,{className:"mt-2",children:[(0,a.jsx)(W.A,{checked:m,onChange:e=>{e.target.checked?(h(!0),y(t)):b("")}}),(0,a.jsxs)($.A.Label,{children:["Use default value (",t,")"]}),(0,a.jsxs)($.A.Caption,{children:["Inherited from"," ",(0,a.jsx)(k.A,{inline:!0,href:(0,I.p3r)({owner:n}),children:n})]})]})]}),(0,a.jsxs)("div",{className:"p-3 d-flex flex-justify-end gap-2 border-top",children:[(0,a.jsx)(l.Q,{onClick:i,children:"Cancel"}),(0,a.jsx)(l.Q,{variant:"primary",onClick:v,children:"Apply"})]})]})}try{K.displayName||(K.displayName="CustomPropertyStringEditor")}catch{}try{Z.displayName||(Z.displayName="InnerStringEditor")}catch{}let Q=(0,u.forwardRef)((e,t)=>{let{valueType:r,defaultValue:n,regex:s,mixed:l,onChange:i,orgName:u,editingRedesignEnabled:c}=e,d=e.propertyValue||(0,o.sN)(r);if(c)switch(r){case"single_select":return(0,a.jsx)(j,{...e,propertyValue:d});case"multi_select":return(0,a.jsx)(_,{...e,propertyValue:d});case"true_false":return(0,a.jsx)(v,{...e,propertyValue:d});case"string":return(0,a.jsx)(K,{propertyValue:d,defaultValue:n,regexPattern:s,mixed:l,orgName:u,onChange:i});default:return null}switch(r){case"single_select":return(0,a.jsx)(A,{...e,propertyValue:d});case"multi_select":return(0,a.jsx)(S,{...e,propertyValue:d});case"true_false":return(0,a.jsx)(A,{...e,allowedValues:["true","false"],propertyValue:d});case"string":return(0,a.jsx)(G,{ref:t,...e,propertyValue:d});default:return null}});Q.displayName="CustomPropertyInput";let G=(0,u.forwardRef)(({propertyValue:e,defaultValue:t,propertyName:r,mixed:n,onChange:o,inputProps:s},l)=>(0,a.jsx)(U.A,{ref:l,block:!0,"aria-label":r,onChange:e=>o(e.target.value),value:e,placeholder:n?V:t||"",...s}));G.displayName="StringPropertyInput";let Y={tableContainer:"CustomPropertyValuesTable-module__tableContainer--U6wM1",propertyRow:"CustomPropertyValuesTable-module__propertyRow--KufNg",inlineContainer:"CustomPropertyValuesTable-module__inlineContainer--cHYxE",mutedText:"CustomPropertyValuesTable-module__mutedText--RDP72",controlsContainer:"CustomPropertyValuesTable-module__controlsContainer--zrrgL",FormControl_Validation:"CustomPropertyValuesTable-module__FormControl_Validation--aR7wS",FormControl:"CustomPropertyValuesTable-module__FormControl--avnRx",FormControl_Label:"CustomPropertyValuesTable-module__FormControl_Label--PlZxB",formInputArea:"CustomPropertyValuesTable-module__formInputArea--W_l9i",formTrailingArea:"CustomPropertyValuesTable-module__formTrailingArea--SlMCn",FormControl_Caption:"CustomPropertyValuesTable-module__FormControl_Caption--dlmUq",formBottomMessageArea:"CustomPropertyValuesTable-module__formBottomMessageArea--exfME",propertyToken:"CustomPropertyValuesTable-module__propertyToken--r6_sw",spacedPropertyToken:"CustomPropertyValuesTable-module__spacedPropertyToken--Usibr",propertyLabel:"CustomPropertyValuesTable-module__propertyLabel--qzHev",propertyDescription:"CustomPropertyValuesTable-module__propertyDescription--tF6IU"};function ee(e){let{definitions:t,propertyValuesMap:r,orgName:n,showLockMessages:o=!0,showUndo:s=!0}=e,{editableDefinitions:l}=e,i=(0,u.useMemo)(()=>new Set((l||[]).map(e=>e.propertyName)),[l]);return 0===t.length?null:(0,a.jsx)("div",{"data-testid":"custom-property-values-table",className:Y.tableContainer,children:t.map(t=>{let{propertyName:l}=t,u=r[l],c="editableDefinitions"in e&&i.has(l);return(0,a.jsx)("div",{"data-testid":"property-row",className:Y.propertyRow,children:c?(0,a.jsx)(er,{changed:!!u?.changed,mixed:!!u?.mixed,propertyValue:u?.value,definition:t,error:u?.error,onChange:t=>e.setPropertyValue(l,t),onReset:()=>e.revertPropertyValue(l),showUndo:s,orgName:n},l):(0,a.jsx)(et,{propertyValue:u?.value||t.defaultValue||"",definition:t,showLockMessages:o,orgName:n},l)},l)})})}function et({propertyValue:e,definition:t,showLockMessages:r,orgName:n}){let{description:o}=t;return(0,a.jsx)(ea,{label:eo(t),description:o,value:(0,a.jsx)(en,{propertyValue:e,definition:t}),bottomMessage:r&&(0,a.jsxs)("div",{className:Y.inlineContainer,children:[(0,a.jsxs)("span",{className:Y.mutedText,children:[(0,a.jsx)(s.ShieldLockIcon,{size:"small"})," Managed by"," "]}),(0,a.jsx)(k.A,{inline:!0,href:(0,I.p3r)({owner:n}),children:n})]})})}function er({propertyValue:e,definition:t,changed:r,mixed:n=!1,error:o,onChange:s,onReset:l,showUndo:i,orgName:u}){let{propertyName:c,description:d}=t,p=(0,L.u)("custom_properties_editing_redesign"),m=`${c}-validation-error`;return(0,a.jsx)(ea,{label:eo(t),description:d,value:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:Y.controlsContainer,children:(0,a.jsx)(Q,{...t,propertyValue:e,mixed:n,onChange:s,orgName:u,editingRedesignEnabled:p,inputProps:o?{"aria-describedby":m}:{}})}),o&&(0,a.jsx)($.A.Validation,{variant:"error",id:m,className:Y.FormControl_Validation,children:o})]}),trailing:(0,a.jsx)(es,{definition:t,changed:r,onReset:l,onChange:s,showUndo:i})})}function ea({label:e,description:t,bottomMessage:r,value:n,trailing:o}){return(0,a.jsxs)($.A,{className:Y.FormControl,children:[(0,a.jsx)($.A.Label,{"data-testid":"property-name",className:Y.FormControl_Label,children:e}),(0,a.jsx)("div",{className:Y.formInputArea,children:n}),o?(0,a.jsx)("div",{className:Y.formTrailingArea,children:o}):null,t&&(0,a.jsx)($.A.Caption,{className:Y.FormControl_Caption,children:t}),r?(0,a.jsx)("div",{className:Y.formBottomMessageArea,children:r}):null]})}function en({propertyValue:e,definition:t}){if((0,o.sX)(e))return(0,a.jsx)("span",{className:Y.mutedText,children:"(Empty)"});switch(t.valueType){case"single_select":case"true_false":return(0,a.jsx)(D.A,{text:(0,a.jsx)(i.A,{title:e,maxWidth:"100%",children:e}),className:Y.propertyToken});case"multi_select":return(0,a.jsx)(a.Fragment,{children:e.map(e=>(0,a.jsx)(D.A,{text:(0,a.jsx)(i.A,{title:e,maxWidth:"100%",children:e}),className:Y.spacedPropertyToken},e))});case"string":return(0,a.jsx)(i.A,{title:e,maxWidth:"100%",children:e})}}function eo({propertyName:e,required:t}){return`${e}${t?" *":""}`}function es({definition:e,changed:t,showUndo:r=!0,onReset:n,onChange:o}){let{propertyName:l,required:i,source:u}=e,c=`Undo ${l} changes`,d=`Reset ${l} to default value`;return(0,a.jsxs)(M.W,{children:[(0,a.jsx)(M.W.Anchor,{children:(0,a.jsx)(E.K,{icon:s.KebabHorizontalIcon,variant:"invisible","aria-label":`Open reset options for ${l}`,description:"Reset options"})}),(0,a.jsx)(M.W.Overlay,{width:"small",children:(0,a.jsxs)(F.l,{children:[r&&(0,a.jsxs)(F.l.Item,{onSelect:n,"aria-label":c,inactiveText:t?void 0:"No change to undo",children:[(0,a.jsx)(F.l.LeadingVisual,{children:(0,a.jsx)(s.UndoIcon,{})}),(0,a.jsx)("span",{className:Y.propertyLabel,children:"Undo"}),(0,a.jsx)("span",{className:Y.propertyDescription,children:"Reset to the last used value"})]}),i&&(0,a.jsxs)(F.l.Item,{onSelect:()=>o(""),"aria-label":d,children:[(0,a.jsx)(F.l.LeadingVisual,{children:(0,a.jsx)(s.SyncIcon,{})}),(0,a.jsx)("span",{className:Y.propertyLabel,children:"Reset to default"}),(0,a.jsxs)("span",{className:Y.propertyDescription,children:["Inherit the value defined by the ","business"===u.type?"enterprise":"organization"]})]})]})})]})}try{ee.displayName||(ee.displayName="CustomPropertyValuesTable")}catch{}try{et.displayName||(et.displayName="CustomPropertyReadValueRow")}catch{}try{er.displayName||(er.displayName="CustomPropertyEditValueRow")}catch{}try{ea.displayName||(ea.displayName="DataTableRow")}catch{}try{en.displayName||(en.displayName="DisplayPropertyValue")}catch{}try{es.displayName||(es.displayName="ResetDropdown")}catch{}var el=r(46309),ei=r(48521);let eu={propertyRow:"CustomPropertyValuesTableV2-module__propertyRow--q6aaE",editRow:"CustomPropertyValuesTableV2-module__editRow--BuZLI",readRow:"CustomPropertyValuesTableV2-module__readRow--Nx4aJ",controlsContainer:"CustomPropertyValuesTableV2-module__controlsContainer--YH4ED",FormControl_Validation:"CustomPropertyValuesTableV2-module__FormControl_Validation--rzrTl",FormControl:"CustomPropertyValuesTableV2-module__FormControl--RpNf5",FormControl_Label:"CustomPropertyValuesTableV2-module__FormControl_Label--Z2nYd",formInputArea:"CustomPropertyValuesTableV2-module__formInputArea--tL4yC",actionButtonsArea:"CustomPropertyValuesTableV2-module__actionButtonsArea--owwuT",FormControl_Caption:"CustomPropertyValuesTableV2-module__FormControl_Caption--lRw5X",formMessageArea:"CustomPropertyValuesTableV2-module__formMessageArea--db_cl"},ec=(0,u.forwardRef)((e,t)=>{let{definitions:r,propertyValuesMap:n,orgName:o,showUndo:s=!0,showSummary:l}=e,{editableDefinitions:i}=e,c=(0,u.useMemo)(()=>new Set((i||[]).map(e=>e.propertyName)),[i]),{refsByPropertyName:d,setRef:p,clearRefs:m}=ef();return((0,u.useEffect)(()=>{m()},[m,c]),(0,u.useImperativeHandle)(t,()=>({focusInput:e=>{d[e]?.focus()}})),0===r.length)?null:(0,a.jsx)("div",{children:r.map(t=>{let{propertyName:r}=t,i=n[r],u="editableDefinitions"in e&&c.has(r);return(0,a.jsx)("div",{"data-testid":"property-row",className:(0,q.$)(eu.propertyRow,l?eu.readRow:eu.editRow),children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-bold fgColor-default mr-2",children:`${r}:`}),(0,a.jsx)("span",{className:"fgColor-muted",children:em(t,i?.value)})]}):u?(0,a.jsx)(ed,{ref:e=>{p(r,e)},changed:!!i?.changed,mixed:!!i?.mixed,propertyValue:i?.value,definition:t,error:i?.error,onChange:t=>e.setPropertyValue(r,t),onReset:()=>e.revertPropertyValue(r),showUndo:s,orgName:o},r):(0,a.jsx)(ep,{propertyValue:i?.value,definition:t},r)},r)})})});ec.displayName="CustomPropertyValuesTableV2";let ed=(0,u.forwardRef)(({propertyValue:e,definition:t,changed:r,mixed:n=!1,error:o,onChange:s,onReset:l,showUndo:i,orgName:u},c)=>{let{propertyName:d,description:p}=t,m=(0,ei.u)("custom_properties_editing_redesign"),h=`${d}-validation-error`;return(0,a.jsx)(eh,{label:d,description:p,value:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:eu.controlsContainer,children:(0,a.jsx)(Q,{ref:c,...t,propertyValue:e,mixed:n,onChange:s,orgName:u,editingRedesignEnabled:m,inputProps:o?{"aria-describedby":h}:{}})}),o&&(0,a.jsx)($.A.Validation,{variant:"error",id:h,className:eu.FormControl_Validation,children:o})]}),trailing:(0,a.jsx)(es,{definition:t,changed:r,onReset:l,onChange:s,showUndo:i})})});function ep({propertyValue:e,definition:t}){let{description:r,propertyName:n}=t,o=em(t,e);return(0,a.jsx)(eh,{label:n,description:r,value:(0,a.jsxs)(el.B,{direction:"horizontal",gap:"condensed",children:[(0,a.jsx)(el.B.Item,{className:"flex-shrink-0",children:(0,a.jsx)(s.ShieldLockIcon,{size:"small"})}),(0,a.jsx)(el.B.Item,{children:(0,a.jsx)("span",{children:o})})]})})}ed.displayName="CustomPropertyEditValueRowV2";let em=(e,t)=>t||(e.defaultValue?`Default (${(e=>Array.isArray(e)?e.join(", "):e)(e.defaultValue)})`:"");function eh({label:e,description:t,bottomMessage:r,value:n,trailing:o}){return(0,a.jsxs)($.A,{className:eu.FormControl,children:[(0,a.jsx)($.A.Label,{"data-testid":"property-name",className:eu.FormControl_Label,children:e}),(0,a.jsx)("div",{className:eu.formInputArea,children:n}),o?(0,a.jsx)("div",{className:eu.actionButtonsArea,children:o}):null,t&&(0,a.jsx)($.A.Caption,{className:eu.FormControl_Caption,children:t}),r?(0,a.jsx)("div",{className:eu.formMessageArea,children:r}):null]})}let ef=()=>{let e=(0,u.useRef)({});return{refsByPropertyName:e.current,setRef:(t,r)=>{e.current[t]=r},clearRefs:()=>{e.current={}}}};try{ep.displayName||(ep.displayName="CustomPropertyReadValueRowV2")}catch{}try{eh.displayName||(eh.displayName="DataTableRow")}catch{}},99385:(e,t,r)=>{function a(e){return Array.isArray(e)}function n(e){return!e||0===e.length}function o(e){return"multi_select"===e?[]:""}function s(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((e,r)=>e===t[r]):e===t}r.d(t,{OD:()=>a,sN:()=>o,sX:()=>n,tE:()=>s})},70987:(e,t,r)=>{r.d(t,{r:()=>n});var a=r(97797);async function n(e){let t=document.querySelector("#site-details-dialog").content.cloneNode(!0),r=t.querySelector("details"),n=r.querySelector("details-dialog"),o=r.querySelector(".js-details-dialog-spinner");e.detailsClass&&r.classList.add(...e.detailsClass.split(" ")),e.dialogClass&&n.classList.add(...e.dialogClass.split(" ")),e.label?n.setAttribute("aria-label",e.label):e.labelledBy&&n.setAttribute("aria-labelledby",e.labelledBy),document.body.append(t);try{let t=await e.content;o.remove(),n.prepend(t)}catch{o.remove();let t=document.createElement("span");t.textContent=e.errorMessage||"Couldn't load the content",t.classList.add("my-6"),t.classList.add("mx-4"),n.prepend(t)}return r.addEventListener("toggle",()=>{r.hasAttribute("open")||((0,a.h)(n,"dialog:remove"),r.remove())}),n}},30923:(e,t,r)=>{r.d(t,{Ee:()=>i,b4:()=>u,Ts:()=>l});var a=r(50467);let n=class ResponseError extends Error{constructor(e,t){super(`${e} for HTTP ${t.status}`),(0,a._)(this,"response",void 0),this.response=t,this.name="ResponseError"}};var o=r(69759),s=r(51987);async function l(e,t,r){let a=new Request(t,r);(0,s.tV)(a.headers);let l=await self.fetch(a);if(l.status<200||l.status>=300)throw Error(`HTTP ${l.status}${l.statusText||""}`);return!function(e,t,r=!1){let a=t.headers.get("content-type")||"";if(!r&&!a.startsWith("text/html"))throw new n(`expected response with text/html, but was ${a}`,t);if(r&&!(a.startsWith("text/html")||a.startsWith("application/json")))throw new n(`expected response with text/html or application/json, but was ${a}`,t);let o=t.headers.get("x-html-safe");if(o){if(!e.includes(o))throw new n("response X-HTML-Safe nonce did not match",t)}else throw new n("missing X-HTML-Safe nonce",t)}(function(e){let t=[...e.querySelectorAll("meta[name=html-safe-nonce]")].map(e=>e.content);if(t.length<1)throw Error("could not find html-safe-nonce on document");return t}(e),l),(0,o.B)(e,await l.text())}function i(e,t,r=1e3,a=[200],n=[202]){return async function r(o){let l=new Request(e,t);(0,s.tV)(l.headers);let i=await self.fetch(l);if(n.includes(i.status))return await new Promise(e=>setTimeout(e,o)),r(1.5*o);if(a.includes(i.status))return i;if(i.status<200||i.status>=300)throw Error(`HTTP ${i.status}${i.statusText||""}`);throw Error(`Unexpected ${i.status} response status from poll endpoint`)}(r)}async function u(e,t,r){let{wait:a=500,acceptedStatusCodes:n=[200],max:o=3,attempt:l=0}=r||{},i=async()=>new Promise((r,i)=>{setTimeout(async()=>{try{let a=new Request(e,t);(0,s.tV)(a.headers);let i=await self.fetch(a);if(n.includes(i.status)||l+1===o)return r(i);r("retry")}catch(e){i(e)}},a*l)}),c=await i();return"retry"!==c?c:u(e,t,{wait:a,acceptedStatusCodes:n,max:o,attempt:l+1})}},41245:(e,t,r)=>{r.d(t,{A:()=>a});let a=(e,t)=>{let r=new URL(e,window.location.origin),a=new URL(t,window.location.origin);return a.href.includes("#")&&r.host===a.host&&r.pathname===a.pathname&&r.search===a.search}},69759:(e,t,r)=>{r.d(t,{B:()=>a});function a(e,t){let r=e.createElement("template");return r.innerHTML=t,e.importNode(r.content,!0)}},58371:(e,t,r)=>{r.d(t,{Ax:()=>n.Ax,JW:()=>o,ZV:()=>n.ZV});var a=r(51987),n=r(13937);function o(e,t){(0,n.JW)(e,async(e,r,n)=>((0,a.tV)(n.headers),t(e,r,n)))}},43538:(e,t,r)=>{r.d(t,{$:()=>o,O:()=>i});var a=r(96379),n=r(96540);function o(e,t){let[r,a]=(0,n.useState)("UNKNOWN");return{isValid:"VALID"===r,showError:"INVALID"===r,validate:async(r,n={})=>{if(a("UNKNOWN"),!t)return!0;let o=await s(r,`${e}/${t}`,n);return a(o),l(o)},reset:(e=!1)=>{a(e?"VALID":"UNKNOWN")}}}let s=async(e,t,r)=>{let n=await (0,a.lS)(t,{...r,method:"POST",body:e});if(n.ok){let{valid:e}=await n.json();return e?"VALID":"INVALID"}return 400===n.status?"INVALID":"UNKNOWN"},l=e=>{switch(e){case"VALID":case"UNKNOWN":return!0;case"INVALID":return!1}},i=async(e,t)=>l(await s(e,t))},65232:(e,t,r)=>{r.d(t,{N:()=>o});var a=r(25407),n=r(43538);let o=async(e,t)=>!(e?.length&&t?.length)||await (0,n.O)({pattern:e,value:t},(0,a.ygX)())},74507:(e,t,r)=>{r.d(t,{Ay:()=>m,YU:()=>d,nA:()=>h});var a=r(70987),n=r(30923),o=r(58371),s=r(83315),l=r(51987);let i=!1;async function u(){let e=document.querySelector("link[rel=sudo-modal]"),t=document.querySelector(".js-sudo-prompt");if(t instanceof HTMLTemplateElement)return t;if(e){let t=await (0,n.Ts)(document,function(e){let t=new URL(e,window.location.origin),r=new URLSearchParams(t.search.slice(1));return r.set("webauthn-support",(0,s.K)()),t.search=r.toString(),t.toString()}(e.href));return document.body.appendChild(t),document.querySelector(".js-sudo-prompt")}throw Error("couldn't load sudo prompt")}let c=!1;async function d(e){if(i)return!1;i=!0,c=!1;let t=(await u()).content.cloneNode(!0),r=await (0,a.r)({content:t}),n=e?.closest("details[open]");return n&&n.removeAttribute("open"),await new Promise(e=>{r.addEventListener("dialog:remove",function(){n&&n.setAttribute("open","open"),i=!1,e()},{once:!0})}),c}async function p(e,t,r="Sudo authentication failed.",a="Too many authentication attempts. Please try again later.",n=".js-sudo-error",o){try{await t.text()}catch(s){let t;if(!s.response)throw s;switch(s.response.status){case 401:t=r;break;case 429:t=a;break;default:t="An unknown error occurred. Please try again later."}if(e.querySelector(n).textContent=t,e.querySelector(n).hidden=!1,o&&(e.querySelector(o).value=""),401!==s.response.status&&429!==s.response.status)throw s;return}c=!0,e.closest("details").removeAttribute("open")}async function m(e){let t=await fetch("/sessions/in_sudo",{headers:{accept:"application/json",...(0,l.kt)()}});return!!t.ok&&"true"===await t.text()||d(e)}async function h(){let e=await fetch("/sessions/in_sudo",{headers:{accept:"application/json",...(0,l.kt)()}});return!!e.ok&&"true"===await e.text()||!1}(0,o.JW)(".js-sudo-webauthn-form",async function(e,t){await p(e,t)}),(0,o.JW)(".js-sudo-github-mobile-form",async function(e,t){await p(e,t)}),(0,o.JW)(".js-sudo-totp-form",async function(e,t){await p(e,t,void 0,void 0,".flash-error","#totp")}),(0,o.JW)(".js-sudo-email-form",async function(e,t){await p(e,t,void 0,void 0,".flash-error","#email")}),(0,o.JW)(".js-sudo-password-form",async function(e,t){await p(e,t,"Incorrect password.","Too many password attempts. Please wait and try again.",void 0,".js-sudo-password")})},96459:(e,t,r)=>{r.d(t,{Z:()=>u,o:()=>c});var a=r(96540),n=r(13017),o=r(41245),s=r(65432),l=r(58578),i=r(24518);let u=()=>{let{routes:e}=a.useContext(i.k),t=(0,n.Zp)();return a.useCallback((i,u={})=>{let c=(0,n.o1)(i).pathname;if(!(0,n.ue)(e,c)||u.reloadDocument){let e="string"==typeof i?i:(0,n.AO)(i);(async()=>{let{softNavigate:t}=await Promise.all([r.e("vendors-node_modules_github_turbo_dist_turbo_es2017-esm_js"),r.e("packages_soft-navigate_soft-navigate_ts")]).then(r.bind(r,54563));t(e)})()}else{(0,o.A)(location.href,i.toString())||(0,s.SC)("react");let{preventAutofocus:e,...r}=u;(0,a.startTransition)(()=>{t(i,e?{...r,state:{[l.V]:!0,...r.state}}:r)})}},[t,e])},c=()=>{let[e]=(0,n.ok)(),t=u(),{pathname:r}=(0,n.zy)(),o=a.useCallback((a,o={})=>{t({pathname:r,search:(0,n.PI)("function"==typeof a?a(e):a).toString()},o)},[e,t,r]);return[e,o]}},96379:(e,t,r)=>{r.d(t,{DI:()=>o,QJ:()=>l,Sr:()=>i,lS:()=>s});var a=r(51987),n=r(88057);async function o(e,t={}){var r=e;if(new URL(r,window.location.origin).origin!==window.location.origin)throw Error("Can not make cross-origin requests from verifiedFetch");let s=function(e){let t=new URL(e,window.location.href),r=new URL(window.location.href,window.location.origin),a=r.searchParams.get("_features");a&&!t.searchParams.has("_features")&&t.searchParams.set("_features",a);let n=r.searchParams.get("_tracing");return n&&!t.searchParams.has("_tracing")&&t.searchParams.set("_tracing",n),e.startsWith(window.location.origin)?t.href:`${t.pathname}${t.search}`}(e),l={...t.headers,"GitHub-Verified-Fetch":"true",...(0,a.kt)()},i=await fetch(s,{...t,headers:l}),u=i?.headers?.get("X-Github-Request-Id");return u&&(0,n.Ex)(u),i}function s(e,t){let r={...t?.headers??{},Accept:"application/json","Content-Type":"application/json"},a=t?.body?JSON.stringify(t.body):void 0;return o(e,{...t,body:a,headers:r})}function l(e,t={}){let r={...t.headers,"GitHub-Is-React":"true"};return o(e,{...t,headers:r})}function i(e,t){let r={...t?.headers??{},"GitHub-Is-React":"true"};return s(e,{...t,headers:r})}},83315:(e,t,r)=>{r.d(t,{K:()=>n,e:()=>o});var a=r(74043);function n(){return(0,a.$j)()?"supported":"unsupported"}async function o(){return await window.PublicKeyCredential?.isUserVerifyingPlatformAuthenticatorAvailable()?"supported":"unsupported"}},77430:(e,t,r)=>{r.d(t,{r:()=>l});var a=r(74848),n=r(71315),o=r(48125),s=r(96540);let l=(0,s.forwardRef)(function({src:e,size:t=20,...r},l){let i=(0,s.useMemo)(()=>{let r=new URL(e,n.fV.origin);return r.searchParams.has("size")||r.searchParams.has("s")||r.searchParams.set("size",String(2*Number(t))),r.toString()},[e,t]);return(0,a.jsx)(o.A,{ref:l,src:i,size:t,"data-testid":"github-avatar",...r})});try{l.displayName||(l.displayName="GitHubAvatar")}catch{}},73017:(e,t,r)=>{r.d(t,{$6:()=>c,JR:()=>i,vb:()=>l});var a=r(74848),n=r(75177),o=r(84511),s=r(96540);let l=d(n.A),i=d(o.A),u=(0,s.forwardRef)((e,t)=>(0,a.jsx)("div",{ref:t,...e}));u.displayName="Div";let c=d(u);function d(e){let t=(0,s.forwardRef)((t,r)=>{let{html:n,...o}=t;return(0,a.jsx)(e,{ref:r,...o,dangerouslySetInnerHTML:n?{__html:n}:void 0})});return t.displayName=`SafeHTML${e.displayName||e.name}`,t}try{l.displayName||(l.displayName="VerifiedHTMLBox")}catch{}try{i.displayName||(i.displayName="VerifiedHTMLText")}catch{}try{c.displayName||(c.displayName="VerifiedHTMLDiv")}catch{}}}]);
//# sourceMappingURL=packages_app-uuid_app-uuid_ts-packages_custom-properties-editing_index_ts-packages_sudo_sudo_-3fe794-d24043978512.js.map